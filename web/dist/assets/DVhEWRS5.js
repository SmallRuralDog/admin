import{k,f as u,o as d,l as f,A as s,a as o,w as t,F,n as q,p as a,aw as D,c as E,t as m,ax as T,Z as z,ay as G,$ as M,q as $,az as R,ad as H,aA as Z,aB as j,aC as J,aD as K,a6 as O,aE as Q,aF as W,a9 as X,aG as Y,aH as ee,aa as oe}from"./B4k84dsy.js";import{_ as C,d as ae,t as se,P as te}from"./4Kd19hFo.js";const ne={class:"banner"},ce={class:"banner-inner"},re={class:"carousel-title"},le={class:"carousel-sub-title px-20 line-clamp-2"},ie=["src"],_e=k({__name:"LoginBanner",setup(h){const e=u(window.AmisAdmin.loginBanner);return(l,p)=>{const i=T,x=D;return d(),f("div",ne,[s("div",ce,[o(x,{class:"carousel","animation-name":"fade"},{default:t(()=>[(d(!0),f(F,null,q(a(e),n=>(d(),E(i,{key:n.title},{default:t(()=>[(d(),f("div",{key:n.title,class:"carousel-item"},[s("div",re,m(n.title),1),s("div",le,m(n.desc),1),s("img",{class:"carousel-image",src:n.image},null,8,ie)]))]),_:2},1024))),128))]),_:1})])])}}}),de=C(_e,[["__scopeId","data-v-0566b7fc"]]),ue=(h=!1)=>{const e=u(h);return{loading:e,setLoading:i=>{e.value=i},toggle:()=>{e.value=!e.value}}},me={class:"login-form-wrapper"},pe={class:"login-form-title"},ge={class:"login-form-sub-title"},fe={class:"login-form-error-msg"};const he={class:"login-form-password-actions"},ve=k({__name:"LoginForm",setup(h){const e=u(window.AmisAdmin),l=u(""),{loading:p,setLoading:i}=ue(),x=ae(),n=u(e.value.captchaUrl),Be=()=>{n.value=`${e.value.captchaUrl}?t=${Date.now()}`},c=z("login-config",{rememberPassword:!0,username:"",password:""}),g=G({username:c.value.username,password:c.value.password,verification_code:""}),I=async({errors:v,values:r})=>{if(l.value="",!p.value&&!v){i(!0);try{await x.login(r),R.success("登录成功"),se({name:te.home});const{rememberPassword:_}=c.value,{username:V,password:w}=r;c.value.username=_?V:"",c.value.password=_?w:""}catch(_){l.value=_.message}finally{i(!1)}}},B=v=>{c.value.rememberPassword=v};return(v,r)=>{const _=H,V=Z,w=j,L=J,y=K,Le=ee,ye=oe,A=O,S=Q,N=W,P=X,U=Y;return d(),f("div",me,[s("div",pe,m(a(e).loginTitle),1),s("div",ge,m(a(e).loginDesc),1),s("div",fe,m(a(l)),1),o(U,{ref:"loginForm",model:a(g),class:"login-form",layout:"vertical",onSubmit:I},{default:t(()=>[o(w,{field:"username",rules:[{required:!0,message:"用户名不能为空"}],"validate-trigger":["change","blur"],"hide-label":""},{default:t(()=>[o(V,{modelValue:a(g).username,"onUpdate:modelValue":r[0]||(r[0]=b=>a(g).username=b),placeholder:"用户名"},{prefix:t(()=>[o(_)]),_:1},8,["modelValue"])]),_:1}),o(w,{field:"password",rules:[{required:!0,message:"密码不能为空"}],"validate-trigger":["change","blur"],"hide-label":""},{default:t(()=>[o(y,{modelValue:a(g).password,"onUpdate:modelValue":r[1]||(r[1]=b=>a(g).password=b),placeholder:"密码","allow-clear":""},{prefix:t(()=>[o(L)]),_:1},8,["modelValue"])]),_:1}),M("",!0),o(A,{size:16,direction:"vertical"},{default:t(()=>[s("div",he,[o(S,{checked:"rememberPassword","model-value":a(c).rememberPassword,onChange:B},{default:t(()=>[$("记住密码")]),_:1},8,["model-value","onChange"]),o(N,null,{default:t(()=>[$("忘记密码")]),_:1})]),o(P,{type:"primary","html-type":"submit",long:"",loading:a(p)},{default:t(()=>[$(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}}),we=C(ve,[["__scopeId","data-v-9ff89e3d"]]),be={class:"container"},xe={class:"logo"},Ve=["src"],$e={class:"logo-text"},ke={class:"content"},Ce={class:"content-inner"},Ie=k({__name:"LoginView",setup(h){const e=u(window.AmisAdmin);return localStorage.setItem("arco-theme","light"),(l,p)=>(d(),f("div",be,[s("div",xe,[s("img",{alt:"logo",class:"h-33 w-33",src:a(e).logo},null,8,Ve),s("div",$e,m(a(e).title),1)]),o(de),s("div",ke,[s("div",Ce,[o(we)])])]))}}),Ne=C(Ie,[["__scopeId","data-v-f1e1325c"]]);export{Ne as default};
